!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var o=n(1),i=n(2),r={};r.handleLocation=o.handleLocation,r.getQueryString=o.getQueryString,r.startMap=function(t,e,n,o){var r=(0,i.createMap)(t,e,n);(0,i.createApp)(r,o).run()},window.msoa=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.handleLocation=function(){var t=document.getElementById("acceptform"),e=document.getElementById("acceptbutton");"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(n){t.long.value=n.coords.longitude.toFixed(6),t.lat.value=n.coords.latitude.toFixed(6),e.innerHTML="Go to my location"},function(t){t.code==t.PERMISSION_DENIED&&(e.innerHTML="Continue to map")},{maximumAge:3e5})},e.getQueryString=function(t){for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t)return o[1]}return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.createMap=function(t,e,n){var o=function(t,e){return null==t||0==t||isNaN(parseFloat(t))?e:parseFloat(t)},i=o(t,-.116773),r=o(e,51.510357),u=o(n,12.5);return mapboxgl.accessToken="pk.eyJ1IjoiaGF3a2luc29ob2NsIiwiYSI6IjNmMmZkMzY4MTUwZGNiMjE4NTExOWQwNDBjNzg4NjAzIn0.bv8BBlUo7MtQR544YviGZQ",new mapboxgl.Map({container:"map",style:"mapbox://styles/hawkinsohocl/cjvwaizzk45o41cpcd7divwak",center:[i,r],zoom:u})},e.createApp=function(t,e){return{suggestion:null,map:t,csrf:e,run:function(){var e=this;return t.addControl(new mapboxgl.NavigationControl,"top-right"),this.map.on("load",function(){t.addSource("msoa",{type:"vector",url:"mapbox://hawkinsohocl.dau3hp7r"}),t.addLayer({id:"msoa-highlight",type:"fill",source:"msoa","source-layer":"msoa-2011-polygons-hcl-asot7f",paint:{"fill-color":"#d83808","fill-opacity":0},minzoom:8.5,maxzoom:22})}),t.on("zoom",function(){t.getZoom()<8.5&&e.hasSuggestion()&&e.closeAndRemoveSuggestion()}),t.on("moveend",function(){var e=t.getCenter(),n=t.getZoom(),o="/msoanames/map?long="+e.lng+"&lat="+e.lat+"&zoom="+n;history.replaceState(null,null,o)}),this},getSuggestion:function(){return this.suggestion},setSuggestion:function(t){return this.suggestion=t,this.suggestion.open(),this},removeSuggestion:function(){return this.suggestion.clearAnimation(),this.suggestion.deselect(),this.suggestion=null,this},closeAndRemoveSuggestion:function(){return this.suggestion.close(),this.removeSuggestion(),this},hasSuggestion:function(){return null!==this.suggestion},getCSRF:function(){return this.csrf}}}}]);